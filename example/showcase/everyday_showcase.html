<!-- Copyright (c) 2013, the Everyday Dart project authors.  Please see the 
 AUTHORS file for details. All rights reserved. Use of this source code is 
 licenced under the Apache License, Version 2.0.  See the LICENSE file for 
 details. --> 
<link rel='import' href='everyday_showcase_codec.html'>
<link rel='import' href='packages/everyday_dart/io/everyday_websocket.html'>
<link rel='import' href='packages/everyday_dart/rpc/everyday_rpc.html'>
<link rel='import' href='packages/everyday_dart/persistence/everyday_rpc_entity_manager.html'>
<link rel='import' href='packages/everyday_dart/persistence/everyday_persistence.html'>
<link rel='import' href='packages/everyday_dart/places/everyday_place_history.html'>
<link rel='import' href='packages/everyday_dart/persistence/everyday_persistence_load.html'>
<link rel='import' href='packages/everyday_dart/patch/everyday_patch_observer.html'>
<link rel='import' href='packages/everyday_dart/persistence/everyday_persistence_persist.html'>
<link rel='import' href='packages/everyday_dart/persistence/everyday_persistence_find_all.html'>
<link rel='import' href='packages/everyday_dart/user/everyday_rpc_user_service.html'>
<link rel='import' href='profile_editor.html'>
<link rel='import' href='everyday_user_access.html'>

 <polymer-element name='everyday-showcase' extends='div'>
  <template bind>
    
  <!-- TODO bind attributes using automatic node finding when it's available.  
  (https://groups.google.com/forum/#!topic/polymer-dev/TZ8kFTpLRF4). Currently
  this is being done manually in this components inserted method.
  
  This example would then look like:
  
  <everyday-showcase-codec 
    id='showcase-codec'>
  </everyday-showcase-codec>  
    
  <everyday-websocket 
    id='showcase-socket' 
    url='{{"ws://localhost:8080"}}'>
  </everyday-websocket>
  
   <everyday-rpc
    id='showcase-rpc' 
    codec='{{$.showcase-codec}}'
    socket='{{$.showcase-socket}}'
  </everyday-rpc>
  
   <everyday-rpc-entity-manager 
    id='showcase-entity-manager'
    invoker='{{$.showcase-rpc}}'>
   </everyday-rpc-entity-manager>
  
  <everyday-persistence
    id='profile-persistence'
    entity-type='{{profileEntityType}}' 
    entity-manager='{{$.showcase-entity-manager}}'
    on-everyday-load='{{profileLoaded}}'>

  </everyday-persistence>
  
   <template id='profile-form' if='{{profile}}'>
      <profile-form profile='{{profile}}' on-change='saveProfile'></profile-form>   
   </template> 
  
   -->
  <everyday-showcase-codec 
    id='showcase-codec'>
  </everyday-showcase-codec>  
    
  <everyday-websocket 
    id='showcase-socket' 
    url='{{"ws://localhost:8080"}}'
    on-everyday-offline='{{setOffline}}'
    on-everyday-online='{{setOnline}}'>
  </everyday-websocket>     
     
 <everyday-rpc
    id='showcase-rpc'>
    codec='{{showcaseCodec}}'
    socket='{{showcaseSocket}}'> 
 </everyday-rpc>
 
 <everyday-rpc-entity-manager 
    id='showcase-entity-manager'
    invoker='{{showcaseRpc}}'>
  </everyday-rpc-entity-manager>
  
   <everyday-rpc-user-service 
    id='showcase-user-service'
    invoker='{{showcaseRpc}}'>
  </everyday-rpc-user-service>
  
  <everyday-place-history transformer='{{placesTransformer}}' place='{{place}}'>
  </everyday-place-history>
  
  <template if='{{displayUserAccess}}'>                    
    <everyday-user-access service='{{showcaseUserService}}' on-everyday-sign-in='{{signedIn}}'></everyday-user-access>
  </template>
  
  <template if='{{displayMain}}'>
    <everyday-persistence-find-all entity-type='{{profileType}}'></everyday-persistence-find-all>  
  </template>

  </template>

  <script type='application/dart' src ='everyday_showcase.dart'></script>
  </polymer-element>